<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Owl_graph (owl-base.Owl_graph)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">owl-base</a> &#x00BB; Owl_graph</nav><h1>Module <code>Owl_graph</code></h1><p>Graph module supports basic operations on DAG.</p><nav class="toc"><ul><li><a href="#type-definition">Type definition</a></li><li><a href="#obtaining-properties">Obtaining properties</a></li><li><a href="#manipulation-functions">Manipulation functions</a></li><li><a href="#iterators">Iterators</a></li><li><a href="#helper-functions">Helper functions</a></li></ul></nav></header><section><header><h6 id="type-definition"><a href="#type-definition" class="anchor"></a>Type definition</h6></header><dl><dt class="spec type" id="type-order"><a href="#type-order" class="anchor"></a><code><span class="keyword">type</span> order</code><code> = </code><table class="variant"><tr id="type-order.BFS" class="anchored"><td class="def constructor"><a href="#type-order.BFS" class="anchor"></a><code>| </code><code><span class="constructor">BFS</span></code></td></tr><tr id="type-order.DFS" class="anchored"><td class="def constructor"><a href="#type-order.DFS" class="anchor"></a><code>| </code><code><span class="constructor">DFS</span></code></td><td class="doc"><p>Order to traverse a graph, BFS or DFS.</p></td></tr></table></dt><dt class="spec type" id="type-traversal"><a href="#type-traversal" class="anchor"></a><code><span class="keyword">type</span> traversal</code><code> = </code><table class="variant"><tr id="type-traversal.PreOrder" class="anchored"><td class="def constructor"><a href="#type-traversal.PreOrder" class="anchor"></a><code>| </code><code><span class="constructor">PreOrder</span></code></td></tr><tr id="type-traversal.PostOrder" class="anchored"><td class="def constructor"><a href="#type-traversal.PostOrder" class="anchor"></a><code>| </code><code><span class="constructor">PostOrder</span></code></td><td class="doc"><p>Order of the function evaluation.</p></td></tr></table></dt><dt class="spec type" id="type-dir"><a href="#type-dir" class="anchor"></a><code><span class="keyword">type</span> dir</code><code> = </code><table class="variant"><tr id="type-dir.Ancestor" class="anchored"><td class="def constructor"><a href="#type-dir.Ancestor" class="anchor"></a><code>| </code><code><span class="constructor">Ancestor</span></code></td></tr><tr id="type-dir.Descendant" class="anchored"><td class="def constructor"><a href="#type-dir.Descendant" class="anchor"></a><code>| </code><code><span class="constructor">Descendant</span></code></td><td class="doc"><p>Iteration direction, i.e. ancestors or descendants</p></td></tr></table></dt><dt class="spec type" id="type-node"><a href="#type-node" class="anchor"></a><code><span class="keyword">type</span> <span>'a node</span></code></dt><dd><p>type definition of a node</p></dd></dl></section><section><header><h6 id="obtaining-properties"><a href="#obtaining-properties" class="anchor"></a>Obtaining properties</h6></header><dl><dt class="spec value" id="val-id"><a href="#val-id" class="anchor"></a><code><span class="keyword">val</span> id : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p>``id x`` returns the id of node ``x``.</p></dd></dl><dl><dt class="spec value" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val</span> name : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> string</code></dt><dd><p>``name x`` returns the name string of node ``x``.</p></dd></dl><dl><dt class="spec value" id="val-set_name"><a href="#val-set_name" class="anchor"></a><code><span class="keyword">val</span> set_name : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>``set_name x s`` sets the name string of node ``x`` to ``s``.</p></dd></dl><dl><dt class="spec value" id="val-parents"><a href="#val-parents" class="anchor"></a><code><span class="keyword">val</span> parents : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span></code></dt><dd><p>``parents x`` returns the parents of node ``x``.</p></dd></dl><dl><dt class="spec value" id="val-set_parents"><a href="#val-set_parents" class="anchor"></a><code><span class="keyword">val</span> set_parents : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``set_parents x parents`` set ``x`` parents to ``parents``.</p></dd></dl><dl><dt class="spec value" id="val-children"><a href="#val-children" class="anchor"></a><code><span class="keyword">val</span> children : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span></code></dt><dd><p>``children x`` returns the children of node ``x``.</p></dd></dl><dl><dt class="spec value" id="val-set_children"><a href="#val-set_children" class="anchor"></a><code><span class="keyword">val</span> set_children : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``set_children x children`` sets ``x`` children to ``children``.</p></dd></dl><dl><dt class="spec value" id="val-indegree"><a href="#val-indegree" class="anchor"></a><code><span class="keyword">val</span> indegree : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p>``indegree x`` returns the in-degree of node ``x``.</p></dd></dl><dl><dt class="spec value" id="val-outdegree"><a href="#val-outdegree" class="anchor"></a><code><span class="keyword">val</span> outdegree : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p>``outdegree x`` returns the out-degree of node ``x``.</p></dd></dl><dl><dt class="spec value" id="val-degree"><a href="#val-degree" class="anchor"></a><code><span class="keyword">val</span> degree : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p>``degree x`` returns the total number of links of ``x``.</p></dd></dl><dl><dt class="spec value" id="val-attr"><a href="#val-attr" class="anchor"></a><code><span class="keyword">val</span> attr : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>``attr x`` returns the ``attr`` field of node ``x``.</p></dd></dl><dl><dt class="spec value" id="val-set_attr"><a href="#val-set_attr" class="anchor"></a><code><span class="keyword">val</span> set_attr : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``set_attr x`` sets the ``attr`` field of node ``x``.</p></dd></dl><dl><dt class="spec value" id="val-num_ancestor"><a href="#val-num_ancestor" class="anchor"></a><code><span class="keyword">val</span> num_ancestor : <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> int</code></dt><dd><p>``num_ancestor x`` returns the number of ancestors of ``x``.</p></dd></dl><dl><dt class="spec value" id="val-num_descendant"><a href="#val-num_descendant" class="anchor"></a><code><span class="keyword">val</span> num_descendant : <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> int</code></dt><dd><p>``num_descendant x`` returns the number of descendants of ``x``.</p></dd></dl><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> int</code></dt><dd><p>``length x`` returns the total number of ancestors and descendants of ``x``.</p></dd></dl></section><section><header><h6 id="manipulation-functions"><a href="#manipulation-functions" class="anchor"></a>Manipulation functions</h6></header><dl><dt class="spec value" id="val-node"><a href="#val-node" class="anchor"></a><code><span class="keyword">val</span> node : <span>?&#8288;id:int</span> <span>&#45;&gt;</span> <span>?&#8288;name:string</span> <span>&#45;&gt;</span> <span>?&#8288;prev:<span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span></span> <span>&#45;&gt;</span> <span>?&#8288;next:<span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span></code></dt><dd><p>``node ~id ~name ~prev ~next attr`` creates a node with given id and name string. The created node is also connected to parents in ``prev`` and children in ``next``. The ``attr`` will be saved in ``attr`` field.</p></dd></dl><dl><dt class="spec value" id="val-connect"><a href="#val-connect" class="anchor"></a><code><span class="keyword">val</span> connect : <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``connect parents children`` connects a set of parents to a set of children. The created links are the Cartesian product of parents and children. In other words, they are bidirectional links between parents and children.</p><p>NOTE: this function does not eliminate any duplicates in the array.</p></dd></dl><dl><dt class="spec value" id="val-connect_descendants"><a href="#val-connect_descendants" class="anchor"></a><code><span class="keyword">val</span> connect_descendants : <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``connect_descendants parents children`` connects parents to their children. This function creates unidirectional links from parents to children. In other words, this function save ``children`` to ``parent.next`` field.</p></dd></dl><dl><dt class="spec value" id="val-connect_ancestors"><a href="#val-connect_ancestors" class="anchor"></a><code><span class="keyword">val</span> connect_ancestors : <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``connect_ancestors parents children`` connects children to their parents. This function creates unidirectional links from children to parents. In other words, this function save ``parents`` to ``child.prev`` field.</p></dd></dl><dl><dt class="spec value" id="val-remove_node"><a href="#val-remove_node" class="anchor"></a><code><span class="keyword">val</span> remove_node : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``remove_node x`` removes node ``x`` from the graph by disconnecting itself from all its parent nodes and child nodes.</p></dd></dl><dl><dt class="spec value" id="val-remove_edge"><a href="#val-remove_edge" class="anchor"></a><code><span class="keyword">val</span> remove_edge : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``remove_edge src dst`` removes a link ``src -&gt; dst`` from the graph. Namely, the correponding entry of ``dst`` in ``src.next`` and ``src`` in ``dst.prev`` will be removed. Note that it does not remove <code>dst -&gt; src</code> if there exists one.</p></dd></dl><dl><dt class="spec value" id="val-replace_child"><a href="#val-replace_child" class="anchor"></a><code><span class="keyword">val</span> replace_child : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``replace_child x y`` replaces ``x`` with ``y`` in ``x`` parents. Namely, ``x`` parents now make link to ``y`` rather than ``x`` in ``next`` field.</p><p>NOTE: The function does NOT make link from ``y`` to ``x`` parents. Namely, the ``prev`` field of ``y`` remains intact.</p></dd></dl><dl><dt class="spec value" id="val-replace_parent"><a href="#val-replace_parent" class="anchor"></a><code><span class="keyword">val</span> replace_parent : <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``replace_parent x y`` replaces ``x`` with ``y`` in ``x`` children. Namely, ``x`` children now make link to ``y`` rather than ``x`` in ``prev`` field.</p><p>NOTE: The function does NOT make link from ``y`` to ``x`` children. Namely, the ``next`` field of ``y`` remains intact.</p></dd></dl><dl><dt class="spec value" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span class="keyword">val</span> copy : <span>?&#8288;dir:<a href="index.html#type-dir">dir</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span></code></dt><dd><p>``copy ~dir x`` makes a copy of ``x`` and all its ancestors (if ``dir = Ancestor``) or all its descendants (if ``dir = Descendant``).</p><p>Note that this function only makes a copy of the graph structure, ``attr`` fileds of the nodes in the new graph share the same memory with those in the original graph.</p></dd></dl></section><section><header><h6 id="iterators"><a href="#iterators" class="anchor"></a>Iterators</h6></header><dl><dt class="spec value" id="val-iter_ancestors"><a href="#val-iter_ancestors" class="anchor"></a><code><span class="keyword">val</span> iter_ancestors : <span>?&#8288;order:<a href="index.html#type-order">order</a></span> <span>&#45;&gt;</span> <span>?&#8288;traversal:<a href="index.html#type-traversal">traversal</a></span> <span>&#45;&gt;</span> <span>(<span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Iterate the ancestors of a given node.</p></dd></dl><dl><dt class="spec value" id="val-iter_descendants"><a href="#val-iter_descendants" class="anchor"></a><code><span class="keyword">val</span> iter_descendants : <span>?&#8288;order:<a href="index.html#type-order">order</a></span> <span>&#45;&gt;</span> <span>?&#8288;traversal:<a href="index.html#type-traversal">traversal</a></span> <span>&#45;&gt;</span> <span>(<span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Iterate the descendants of a given node.</p></dd></dl><dl><dt class="spec value" id="val-filter_ancestors"><a href="#val-filter_ancestors" class="anchor"></a><code><span class="keyword">val</span> filter_ancestors : <span>(<span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span></code></dt><dd><p>Filter the ancestors of a given node.</p></dd></dl><dl><dt class="spec value" id="val-filter_descendants"><a href="#val-filter_descendants" class="anchor"></a><code><span class="keyword">val</span> filter_descendants : <span>(<span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span></code></dt><dd><p>Iterate the descendants of a given node.</p></dd></dl><dl><dt class="spec value" id="val-fold_ancestors"><a href="#val-fold_ancestors" class="anchor"></a><code><span class="keyword">val</span> fold_ancestors : <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Fold the ancestors of a given node.</p></dd></dl><dl><dt class="spec value" id="val-fold_descendants"><a href="#val-fold_descendants" class="anchor"></a><code><span class="keyword">val</span> fold_descendants : <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Fold the descendants of a given node.</p></dd></dl><dl><dt class="spec value" id="val-iter_in_edges"><a href="#val-iter_in_edges" class="anchor"></a><code><span class="keyword">val</span> iter_in_edges : <span>?&#8288;order:<a href="index.html#type-order">order</a></span> <span>&#45;&gt;</span> <span>(<span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Iterate all the in-edges of a given node.</p></dd></dl><dl><dt class="spec value" id="val-iter_out_edges"><a href="#val-iter_out_edges" class="anchor"></a><code><span class="keyword">val</span> iter_out_edges : <span>?&#8288;order:<a href="index.html#type-order">order</a></span> <span>&#45;&gt;</span> <span>(<span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Iterate all the out-edges of a given node.</p></dd></dl><dl><dt class="spec value" id="val-fold_in_edges"><a href="#val-fold_in_edges" class="anchor"></a><code><span class="keyword">val</span> fold_in_edges : <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Fold all the in-edges of a given node.</p></dd></dl><dl><dt class="spec value" id="val-fold_out_edges"><a href="#val-fold_out_edges" class="anchor"></a><code><span class="keyword">val</span> fold_out_edges : <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Fold all the out-edges of a given node.</p></dd></dl></section><section><header><h6 id="helper-functions"><a href="#helper-functions" class="anchor"></a>Helper functions</h6></header><dl><dt class="spec value" id="val-topo_sort"><a href="#val-topo_sort" class="anchor"></a><code><span class="keyword">val</span> topo_sort : <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span></code></dt><dd><p>Topological sort of a given graph using a DFS order. Assumes that the graph is acyclic.</p></dd></dl><dl><dt class="spec value" id="val-pp_node"><a href="#val-pp_node" class="anchor"></a><code><span class="keyword">val</span> pp_node : Stdlib.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Pretty print a given node.</p></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : bool <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="index.html#type-node">node</a></span> array</span> <span>&#45;&gt;</span> string</code></dt><dd><p>Convert a given node to its string representaion.</p></dd></dl></section></div></body></html>