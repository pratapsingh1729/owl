<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Owl_nlp_tfidf (owl.Owl_nlp_tfidf)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">owl</a> &#x00BB; Owl_nlp_tfidf</nav><h1>Module <code>Owl_nlp_tfidf</code></h1><p>NLP: TFIDF module</p><nav class="toc"><ul><li><a href="#type-definition">Type definition</a></li><li><a href="#query-model">Query model</a></li><li><a href="#iteration-functions">Iteration functions</a></li><li><a href="#core-functions">Core functions</a></li><li><a href="#i/o-functions">I/O functions</a></li><li><a href="#helper-functions">Helper functions</a></li></ul></nav></header><section><header><h6 id="type-definition"><a href="#type-definition" class="anchor"></a>Type definition</h6></header><dl><dt class="spec type" id="type-tf_typ"><a href="#type-tf_typ" class="anchor"></a><code><span class="keyword">type</span> tf_typ</code><code> = </code><table class="variant"><tr id="type-tf_typ.Binary" class="anchored"><td class="def constructor"><a href="#type-tf_typ.Binary" class="anchor"></a><code>| </code><code><span class="constructor">Binary</span></code></td></tr><tr id="type-tf_typ.Count" class="anchored"><td class="def constructor"><a href="#type-tf_typ.Count" class="anchor"></a><code>| </code><code><span class="constructor">Count</span></code></td></tr><tr id="type-tf_typ.Frequency" class="anchored"><td class="def constructor"><a href="#type-tf_typ.Frequency" class="anchor"></a><code>| </code><code><span class="constructor">Frequency</span></code></td></tr><tr id="type-tf_typ.Log_norm" class="anchored"><td class="def constructor"><a href="#type-tf_typ.Log_norm" class="anchor"></a><code>| </code><code><span class="constructor">Log_norm</span></code></td><td class="doc"><p>Type of term frequency.</p></td></tr></table></dt><dt class="spec type" id="type-df_typ"><a href="#type-df_typ" class="anchor"></a><code><span class="keyword">type</span> df_typ</code><code> = </code><table class="variant"><tr id="type-df_typ.Unary" class="anchored"><td class="def constructor"><a href="#type-df_typ.Unary" class="anchor"></a><code>| </code><code><span class="constructor">Unary</span></code></td></tr><tr id="type-df_typ.Idf" class="anchored"><td class="def constructor"><a href="#type-df_typ.Idf" class="anchor"></a><code>| </code><code><span class="constructor">Idf</span></code></td></tr><tr id="type-df_typ.Idf_Smooth" class="anchored"><td class="def constructor"><a href="#type-df_typ.Idf_Smooth" class="anchor"></a><code>| </code><code><span class="constructor">Idf_Smooth</span></code></td><td class="doc"><p>Type of inverse document frequency.</p></td></tr></table></dt><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Type of a TFIDF model</p></dd></dl></section><section><header><h6 id="query-model"><a href="#query-model" class="anchor"></a>Query model</h6></header><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Size of Tfidf model, i.e. number of documents contained.</p></dd></dl><dl><dt class="spec value" id="val-term_freq"><a href="#val-term_freq" class="anchor"></a><code><span class="keyword">val</span> term_freq : <a href="index.html#type-tf_typ">tf_typ</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float</code></dt><dd><p>``term_freq term_count num_words`` calculates the term frequency weight.</p></dd></dl><dl><dt class="spec value" id="val-doc_freq"><a href="#val-doc_freq" class="anchor"></a><code><span class="keyword">val</span> doc_freq : <a href="index.html#type-df_typ">df_typ</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float</code></dt><dd><p>``doc_freq doc_count num_docs`` calculates the document frequency weight.</p></dd></dl><dl><dt class="spec value" id="val-get_uri"><a href="#val-get_uri" class="anchor"></a><code><span class="keyword">val</span> get_uri : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Return the path of the TFIDF model.</p></dd></dl><dl><dt class="spec value" id="val-get_corpus"><a href="#val-get_corpus" class="anchor"></a><code><span class="keyword">val</span> get_corpus : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a></code></dt><dd><p>Return the corpus contained in TFIDF model</p></dd></dl><dl><dt class="spec value" id="val-vocab_len"><a href="#val-vocab_len" class="anchor"></a><code><span class="keyword">val</span> vocab_len : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Return the size of the vocabulary contained in the TFIDF model.</p></dd></dl><dl><dt class="spec value" id="val-get_handle"><a href="#val-get_handle" class="anchor"></a><code><span class="keyword">val</span> get_handle : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Stdlib.in_channel</code></dt><dd><p>Get the file handle associated with TFIDF model.</p></dd></dl><dl><dt class="spec value" id="val-doc_count_of"><a href="#val-doc_count_of" class="anchor"></a><code><span class="keyword">val</span> doc_count_of : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> float</code></dt><dd><p>``doc_count_of tfidf w`` calculate document frequency for a given word ``w``.</p></dd></dl><dl><dt class="spec value" id="val-doc_count"><a href="#val-doc_count" class="anchor"></a><code><span class="keyword">val</span> doc_count : <a href="../Owl_nlp_vocabulary/index.html#type-t">Owl_nlp_vocabulary.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>float array</span> * int</code></dt><dd><p>``doc_count vocab fname`` count occurrency in all documents contained in the raw text corpus of file ``fname``, for all words</p></dd></dl><dl><dt class="spec value" id="val-term_count"><a href="#val-term_count" class="anchor"></a><code><span class="keyword">val</span> term_count : <span><span>(<span class="type-var">'a</span>, float)</span> Stdlib.Hashtbl.t</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> array</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>``term_count count doc`` counts the term occurrency in a document, and saves the result in count hashtbl.</p></dd></dl><dl><dt class="spec value" id="val-density"><a href="#val-density" class="anchor"></a><code><span class="keyword">val</span> density : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> float</code></dt><dd><p>Return the percentage of non-zero elements in doc-term matrix.</p></dd></dl><dl><dt class="spec value" id="val-doc_to_vec"><a href="#val-doc_to_vec" class="anchor"></a><code><span class="keyword">val</span> doc_to_vec : <span><span>(float, <span class="type-var">'a</span>)</span> Stdlib.Bigarray.kind</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(int * float)</span> array</span> <span>&#45;&gt;</span> <span><span>(float, <span class="type-var">'a</span>)</span> <a href="../Owl_dense_ndarray/Generic/index.html#type-t">Owl_dense.Ndarray.Generic.t</a></span></code></dt><dd><p>``doc_to_vec kind tfidf vec`` converts a TFIDF vector from its sparse represents to dense ndarray vector whose length equals the vocabulary size.</p></dd></dl></section><section><header><h6 id="iteration-functions"><a href="#iteration-functions" class="anchor"></a>Iteration functions</h6></header><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(int * float)</span> array</span></code></dt><dd><p>Return the ith TFIDF vector in the model. The format of return is ``(vocabulary index, weight)`` tuple array of a document.</p></dd></dl><dl><dt class="spec value" id="val-next"><a href="#val-next" class="anchor"></a><code><span class="keyword">val</span> next : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(int * float)</span> array</span></code></dt><dd><p>Return the next document vector in the model. The format of return is ``(vocabulary index, weight)`` tuple array of a document.</p></dd></dl><dl><dt class="spec value" id="val-next_batch"><a href="#val-next_batch" class="anchor"></a><code><span class="keyword">val</span> next_batch : <span>?&#8288;size:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span>(int * float)</span> array</span> array</span></code></dt><dd><p>Return the next batch of document vectors in the model, the default size is 100.</p></dd></dl><dl><dt class="spec value" id="val-iteri"><a href="#val-iteri" class="anchor"></a><code><span class="keyword">val</span> iteri : <span>(int <span>&#45;&gt;</span> <span><span>(int * float)</span> array</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Iterate all the document vectors in a TFIDF model. The format of document vector is ``(vocabulary index, weight)`` tuple array of a document.</p></dd></dl><dl><dt class="spec value" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span class="keyword">val</span> mapi : <span>(int <span>&#45;&gt;</span> <span><span>(int * float)</span> array</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> array</span></code></dt><dd><p>Map all the document vectors in a TFIDF model. The format of document vector is ``(vocabulary index, weight)`` tuple array of a document.</p></dd></dl><dl><dt class="spec value" id="val-reset_iterators"><a href="#val-reset_iterators" class="anchor"></a><code><span class="keyword">val</span> reset_iterators : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Reset the iterator to the begining of the TFIDF model.</p></dd></dl></section><section><header><h6 id="core-functions"><a href="#core-functions" class="anchor"></a>Core functions</h6></header><dl><dt class="spec value" id="val-build"><a href="#val-build" class="anchor"></a><code><span class="keyword">val</span> build : <span>?&#8288;norm:bool</span> <span>&#45;&gt;</span> <span>?&#8288;sort:bool</span> <span>&#45;&gt;</span> <span>?&#8288;tf:<a href="index.html#type-tf_typ">tf_typ</a></span> <span>&#45;&gt;</span> <span>?&#8288;df:<a href="index.html#type-df_typ">df_typ</a></span> <span>&#45;&gt;</span> <a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>This function builds up a TFIDF model according to the passed in paramaters.</p><p>Parameters: * ``norm``: whether to normalise the vectors in the TFIDF model, default is ``false``. * ``sort``: whether to sort the terms in a TFIDF vector in increasing order w.r.t their vocabulary indices. The default is ``false``. * ``tf``: type of term frequency used in building TFIDF. The default is ``Count``. * ``df``: type of document frequency used in building TFIDF. The default is ``Idf``. * ``corpus``: the corpus built by ``Owl_nlp_corpus`` model atop of which TFIDF will be built.</p></dd></dl></section><section><header><h6 id="i/o-functions"><a href="#i/o-functions" class="anchor"></a>I/O functions</h6></header><dl><dt class="spec value" id="val-save"><a href="#val-save" class="anchor"></a><code><span class="keyword">val</span> save : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>``save tfidf fname`` saves the TFIDF to a file of given file name ``fname``.</p></dd></dl><dl><dt class="spec value" id="val-load"><a href="#val-load" class="anchor"></a><code><span class="keyword">val</span> load : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>``load fname`` loads a TFIDF from a file of name ``fname``.</p></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Convert a TFIDF to its string representation, contains summary information.</p></dd></dl><dl><dt class="spec value" id="val-print"><a href="#val-print" class="anchor"></a><code><span class="keyword">val</span> print : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Pretty print out the summary information of a TFIDF model.</p></dd></dl></section><section><header><h6 id="helper-functions"><a href="#helper-functions" class="anchor"></a>Helper functions</h6></header><dl><dt class="spec value" id="val-tf_typ_string"><a href="#val-tf_typ_string" class="anchor"></a><code><span class="keyword">val</span> tf_typ_string : <a href="index.html#type-tf_typ">tf_typ</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Convert term frequency type into string.</p></dd></dl><dl><dt class="spec value" id="val-df_typ_string"><a href="#val-df_typ_string" class="anchor"></a><code><span class="keyword">val</span> df_typ_string : <a href="index.html#type-df_typ">df_typ</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Convert document frequency type into string.</p></dd></dl><dl><dt class="spec value" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span class="keyword">val</span> apply : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(int * float)</span> array</span></code></dt><dd><p>Convert a single document according to a given model</p></dd></dl><dl><dt class="spec value" id="val-normalise"><a href="#val-normalise" class="anchor"></a><code><span class="keyword">val</span> normalise : <span><span>(<span class="type-var">'a</span> * float)</span> array</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * float)</span> array</span></code></dt><dd><p>``normalise x`` makes ``x`` a unit vector by dividing its l2norm.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <a href="index.html#type-tf_typ">tf_typ</a> <span>&#45;&gt;</span> <a href="index.html#type-df_typ">df_typ</a> <span>&#45;&gt;</span> <a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Wrap up a TFIDF model type. Low-level function and you are not supposed to use it.</p></dd></dl><dl><dt class="spec value" id="val-all_pairwise_distance"><a href="#val-all_pairwise_distance" class="anchor"></a><code><span class="keyword">val</span> all_pairwise_distance : <a href="../Owl_nlp_similarity/index.html#type-t">Owl_nlp_similarity.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * float)</span> array</span> <span>&#45;&gt;</span> <span><span>(int * float)</span> array</span></code></dt><dd><p>Calculate pairwise distance for the whole model, return format is ``(id,dist)`` array.</p></dd></dl><dl><dt class="spec value" id="val-nearest"><a href="#val-nearest" class="anchor"></a><code><span class="keyword">val</span> nearest : <span>?&#8288;typ:<a href="../Owl_nlp_similarity/index.html#type-t">Owl_nlp_similarity.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * float)</span> array</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(int * float)</span> array</span></code></dt><dd><p>Return K-nearest neighbours, it is very slow due to linear search.</p></dd></dl></section></div></body></html>